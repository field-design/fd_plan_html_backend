<!DOCTYPE html>
<html lang="ja">
<!-- @import '/source/kit/head' -->
<body id="top">
<!-- @import '/source/kit/gtm' -->

<!-- @import '/source/kit/global-header' -->

<!-- @import '/source/kit/global-nav' -->

<div class="container">

    <div class="breadcrumbs section">
        <div class="notification">
            <ul class="is-clearfix">
              <li><a href="/admin"><span class="icon is-small"><i class="fa fa-home" aria-hidden="true"></i></span></a></li>
              <li><a href="/product/post/"><span>商品編集</span></a></li>
              <li><span>詳細情報</span></li>
            </ul>
        </div>
    </div>

    <div class="alert mb-30">
        <div class="message is-success">
            <div class="message-header">
                <p>記事を下書き保存しました</p>
                <p>記事の公開リクエストを送信しました</p>
                <p>記事を公開しました</p>
                <p>記事を非公開にしました</p>
                <button class="delete" aria-label="delete" onclick="((this).parentNode.parentNode.parentNode.remove())"></button>
            </div>
        </div>
    </div>

    <div class="columns section">
        <div class="column is-3 is-hidden-mobile">
<!-- @import '/source/kit/side' -->
        </div>
        <div class="column is-9">
<!-- START main -->
<main>

<h2 class="title is-3">2. 詳細情報</h2>

<div class="product-step-nav-list">
  <div class="column">
    <p class="">1. 基本情報</p>
  </div>
  <div class="column is-current">
    <p class="">2. 詳細情報</p>
  </div>
  <div class="column">
    <p class="">3. プラン内容</p>
  </div>
  <div class="column">
    <p class="">4. 代金設定</p>
  </div>
  <div class="column">
    <p class="">5. 予約カレンダー設定</p>
  </div>
  <div class="column">
    <p class="">6. 公開設定</p>
  </div>
</div>

<div class="step-btn-field mb-30 pt-20">
    <p class="prev-btn">
        <a class="button is-info" href="/product/base-info/">
            <span class="icon">
                <i class="fa fa-angle-left"></i>
            </span>
            <span>前のステップへ</span>
        </a>
    </p>
    <p class="next-btn">
        <a class="button is-info" href="/product/plan/">
            <span>次のステップへ</span>
            <span class="icon">
                <i class="fa fa-angle-right"></i>
            </span>
        </a>
    </p>
</div><!-- /step-btn-field -->

<div class="">

<!-- @import '/source/kit/plan/cautions' -->

<!-- @import '/source/kit/plan/cancel' -->

<!-- @import '/source/kit/plan/contract' -->

<!-- @import '/source/kit/plan/exreservation' -->

<!-- @import '/source/kit/plan/send-info' -->

<!-- @import '/source/kit/plan/plan-course' -->

<!-- @import '/source/kit/plan/survey' -->

</div>

<div class="control save-point">
    <p class="has-text-centered">
        <a class="button is-success">
            <span class="icon">
                <i class="fa fa-save"></i>
            </span>
            <span>変更を保存</span>
        </a>
    </p>
</div>

<div class="step-btn-field">
    <p class="prev-btn">
        <a class="button is-info" href="/product/base-info/">
            <span class="icon">
                <i class="fa fa-angle-left"></i>
            </span>
            <span>前のステップへ</span>
        </a>
    </p>
    <p class="next-btn">
        <a class="button is-info" href="/product/plan/">
            <span>次のステップへ</span>
            <span class="icon">
                <i class="fa fa-angle-right"></i>
            </span>
        </a>
    </p>
</div><!-- /step-btn-field -->

</main>
<!-- END main -->
        </div>
    </div>
</div>

<!-- @import '/source/kit/global-footer' -->

<!-- @import '/source/kit/fonts' -->



<!-- @import '/source/kit/commonscript' -->

<!-- @import '/source/kit/gmap' -->

<!-- Page Script -->

<script>
  function initMap() {

    // マップの初期化
    var map = new google.maps.Map(document.getElementById('location-map'), {
      zoom: 13,
      center: {lat: 36.38992, lng: 139.06065}
    });

    // クリックイベントを追加
    map.addListener('click', function(e) {
      getClickLatLng(e.latLng, map);
    });
  }

  function getClickLatLng(lat_lng, map) {

    // 座標を表示
    document.getElementById('lat').textContent = lat_lng.lat();
    document.getElementById('lng').textContent = lat_lng.lng();

    // マーカーを設置
    var marker = new google.maps.Marker({
      position: lat_lng,
      map: map
    });

    // 座標の中心をずらす
    // http://syncer.jp/google-maps-javascript-api-matome/map/method/panTo/
    map.panTo(lat_lng);
  }
</script>

<script>
/***************************
並び替え
****************************/
$( function() {
    $( ".sortable" ).sortable();
    $( ".sortable" ).disableSelection();
    // $( ".button.remove" ).click(function() {
    //     $( this ).parent().remove();
    // });
} );

$(function() {
     // 独自のheader.footer
     if($('[id=own-no]').prop('checked')) {
         $('.own-design').css({
             'opacity': '0',
             'height': '0'
         });
     } else if($('[id=own-yes]').prop('checked')){
         $('.own-design').css({
             'opacity': '1',
             'height': 'auto'
         });
     }
     $('[name="use_custom_tag"]:radio').change( function() {
         if($('[id=own-no]').prop('checked')) {
             $('.own-design').css({
                 'opacity': '0',
                 'height': '0'
             });
         } else if($('[id=own-yes]').prop('checked')){
             $('.own-design').css({
                 'opacity': '1',
                 'height': 'auto'
             });
         }
     });

     // 旅行業に基づく旅行商品の取り扱い
     $('[name=travel-agency-available]').click(function() {
         if ($('[name=travel-agency-available]:eq(0)').prop('checked')) {
             $('.travel-agency-input').fadeIn();
         } else {
             $('.travel-agency-input').fadeOut();
         }
     });

     // 取扱決済
     $('[name=payment_type_UseCvs]').click(function() {
         if ($('[name=payment_type_UseCvs]').prop('checked')) {
             $('.receipt').fadeIn();
         } else {
             $('.receipt').fadeOut();
         }
     });

     // $('[name=travel-agency-available]').change(function() {
     //     if ($(this).is(':checked')) {
     //         $('.travel-agency-input').fadeIn();
     //     } else {
     //         $('.travel-agency-input').fadeOut();
     //     }
     // }).trigger('change');

     // 販売方式
     $('[name=language-select]').change(function() {
         if ($("input:radio[name='language-select']:checked").val() == "normal") {
             $('.language-wrap').hide();
         } else if ($("input:radio[name='language-select']:checked").val() == "contract") {
             $('.language-wrap').show();
         }
     }).trigger('change');

     // 約款
    $('[name=agreement_type]').change(function() {
        if ($("input:radio[name='agreement_type']:checked").val() == "default") {
            $('.agreement-default').show();
            $('.agreement-pdf').hide();
            $('.agreement-url').hide();
        } else if ($("input:radio[name='agreement_type']:checked").val() == "pdf") {
            $('.agreement-pdf').show();
            $('.agreement-default').hide();
            $('.agreement-url').hide();
        } else if ($("input:radio[name='agreement_type']:checked").val() == "url") {
            $('.agreement-url').show();
            $('.agreement-default').hide();
            $('.agreement-pdf').hide();
        }
    }).trigger('change');

    // 旅行条件書
    $('[name=condition_type]').change(function() {
        if ($("input:radio[name='condition_type']:checked").val() == "pdf") {
            $('.condition-pdf').show();
            $('.condition-url').hide();
        } else if ($("input:radio[name='condition_type']:checked").val() == "url") {
            $('.condition-url').show();
            $('.condition-pdf').hide();
        }
    }).trigger('change');

    // プライバシーポリシー
    $('[name=policy_type]').change(function() {
        if ($("input:radio[name='policy_type']:checked").val() == "pdf") {
            $('.policy-pdf').show();
            $('.policy-url').hide();
        } else if ($("input:radio[name='policy_type']:checked").val() == "url") {
            $('.policy-url').show();
            $('.policy-pdf').hide();
        }
    }).trigger('change');

    // 旅行業務取扱料金表
    $('[name=charges_type]').change(function() {
        if ($("input:radio[name='charges_type']:checked").val() == "pdf") {
            $('.charges-pdf').show();
            $('.charges-url').hide();
        } else if ($("input:radio[name='charges_type']:checked").val() == "url") {
            $('.charges-url').show();
            $('.charges-pdf').hide();
        }
    }).trigger('change');

    // 予約先
    $('[name=reservation-select]').change(function() {
        if ($("input:radio[name='reservation-select']:checked").val() == "flat") {
            $('.ex-url').hide();
        } else if ($("input:radio[name='reservation-select']:checked").val() == "external") {
            $('.ex-url').show();
        }
    }).trigger('change');
 });

/***************************
アコーディオン

var start_section = 0;

function menuScroll(index) {
    var target = $('.js-accordion section:nth-child(' + index + ')');
    var position = target.offset().top + 45;
    $('body,html').animate({scrollTop:position}, 400, 'swing');
}
$('.menu-product li:not(last-child) a').click(function(){
    var index = $('.menu-product li').index($(this).parent());
    $('.js-accordion').accordion({
        active: index
    });

});
var cnt = 0;
$('.menu-product li:last-child a').click(function(){
    $('.js-accordion').accordion({
        active : false,
        collapsible : true
    });
    if(cnt == 0) {
        cnt++;
        $(this).click();
    }
});

$(document).ready( function() {
    $('.js-accordion').accordion({
        header: ".conts-ttl",
        active: start_section,
        heightStyle: "content",
        collapsible: true,
        icons: {
            header: "ui-icon-pin-w",
            activeHeader: "ui-icon-circle-arrow-s"
        },
        beforeActivate: function(event, ui) {
            //アコーディオンクローズ
            if(ui.oldHeader[0]) {
                var objOldHeader = $('#' + ui.oldHeader[0].id);
                objOldHeader.find('i').removeClass('fa-minus-circle');
                objOldHeader.find('i').addClass('fa-plus-circle');
                var oldIndex = $('.js-accordion section').index(objOldHeader.parents('section'));
                $('.menu-product li:nth-child(' + (oldIndex + 1) + ') a').removeClass('is-active');
            } else {
                $('.menu-product li:last-child a').removeClass('is-active');
            }

            //アコーディオンオープン
            if(ui.newHeader[0]) {
                var objNewHeader = $('#' + ui.newHeader[0].id);
                objNewHeader.find('i').removeClass('fa-plus-circle');
                objNewHeader.find('i').addClass('fa-minus-circle');
                var newIndex = $('.js-accordion section').index(objNewHeader.parents('section'));
                $('.menu-product li:nth-child(' + (newIndex + 1) + ') a').addClass('is-active');
            } else {
                $('.menu-product li:last-child a').addClass('is-active');
            }
            if(oldIndex !== undefined && newIndex !== undefined) {
                if(oldIndex < newIndex) {
                    menuScroll(oldIndex + 1);
                } else {
                    menuScroll(newIndex);
                }
            }
        },
        activate: function(event, ui) {
            initMap();
        }
    });
    //$('.menu-product li:nth-child(' + start_section + ') a').addClass('is-active');
});
$(window).load(function(){
    $('form').animate({opacity: 1}, 300);
    if(start_section > 0) {
        menuScroll(start_section + 1);
    }
    $('.menu-product li:nth-child(' + (start_section + 1) + ') a').addClass('is-active');
});
****************************/

/***************************
datepicker
****************************/
$(function() {
    $('.js-datepicker').datepicker();
    $('.js-timepicker').timepicker({
        'timeFormat': 'H:i',
        'scrollDefault': 'now',
        'step': 15
    });
});


/***************************
限定公開URL
****************************/
$('.limited-link-url').hide();
$('[name=limited-link]').click(function() {
    if ($('input[name=limited-link]:eq(1)').prop('checked')) {
        $('.limited-link-url').fadeIn();
    } else {
        $('.limited-link-url').fadeOut();
    }
});

/***************************
多言語機能
****************************/
$('.multilanguage-on').hide();
$('[name=multilanguage]').click(function() {
    if ($('input[name=multilanguage]:eq(1)').prop('checked')) {
        $('.multilanguage-on').fadeIn();
    } else {
        $('.multilanguage-on').fadeOut();
    }
});
</script>


<!-- @import '/source/kit/end' -->
</body>
</html>
